digraph {
        node[shape=rect]
        User[label="User", shape="circle"]
        Runtime[label="Elm\nRuntime"]
        AuthStatusPort[label="port: Auth\nStatus"]
        ShowLoginPort[label="port: Show Login"]
        AuthResponse[label="port: Auth\nResponse"]

        HandleAuth[label="handleAuth()\nparses hash\nsends auth response"]
        User -> Browser[label="1. Visits app\nin browser"]
        Browser -> ElmApp[label="2.1 Loads\nElmApp"]
        Browser -> HandleAuth[label="2.2. Invokes"]
        ElmApp -> Runtime[label="3. Port request\n for auth status"]
        Runtime -> AuthStatusPort[label="4. Request\nAuth Status"]
        AuthStatusPort -> LocalStorage[label="5. Get user profile"]
        LocalStorage -> AuthStatusPort[label="6 Returns\nuser profile\nor Unavilable"]
        AuthStatusPort -> Runtime[label="7. auth\nstatus response"]
        Runtime -> ElmApp[label="8. Invokes\nsubscription\nhandler"]
        Runtime -> ElmApp[label="9. Invokes"]
        ElmApp -> Runtime[label="10. Port Equest\nAuth Widget"]
        Runtime -> ShowLoginPort[label="11. Display\nauth widget"]
        
        ShowLoginPort -> Browser[label="12. Navigates to\nyourapp.auth0.com"]
        Browser -> LoginWidget[label="13. Loads"]
        LoginWidget -> GoogleAuth[label="14. User clicks\non Google"]
        GoogleAuth -> LoginWidget[label="15. When\nvalid user"]
        LoginWidget -> Browser [label="14. Redirects to\nlogin callback"]
        Browser -> ElmApp[label="15.1 Loads\nElmApp"]
        Browser -> HandleAuth[label="15.2 Invokes"]
        HandleAuth -> AuthResponse[label="Sends\nUser Profile"]
        AuthResponse -> Runtime[label="User Profile"]
        AuthResponse -> Runtime[label="16. Sends user\nprofile"]
        Runtime -> ElmApp[label="17. Sends\nsubscription\nnotice"]
        ElmApp -> Runtime[label="18. Maps sub\nnotice\nto Msg"]
        Runtime -> ElmApp[label="19. Invokes\nupdate"]
        ElmApp -> Runtime[label="20. Returns\nupdated\nmodel"]
        Runtime -> ElmApp[label="21. Invokes\nview"]
        
}
